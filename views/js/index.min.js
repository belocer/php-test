"use strict";function _createForOfIteratorHelper(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var app=new Vue({el:"#app",data:function(){return{showForm:!1,user_name:"",user_email:"",comment_title:"",comment_text:"",errors:[],showForm__btn:!0,dataComment:[],sortBtn:!1}},methods:{sendComment:function(){this.validationForm(),0===this.errors.length&&this.requestFetch()},validationForm:function(){this.errors=[],(!this.user_name||this.user_name.length<3||this.user_name.length>50)&&this.errors.push('Поле "Имя" - указано не верно!'),(!this.user_email||!this.user_email.match(/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/gi)||this.user_email.length<3||this.user_email.length>50)&&this.errors.push('Указан неверный "E-mail" !'),(!this.comment_title||this.comment_title.length<3||this.comment_title.length>50)&&this.errors.push('"Заголовок" - должен быть больше 3 символов и меньше 50!'),(!this.comment_text||this.comment_text.length<3||this.comment_text.length>500)&&this.errors.push('"Комментарий" - должен быть больше 3 символов но меньше 500!')},requestFetch:function(){var t=this,e="user_name=".concat(this.user_name,"&user_email=").concat(this.user_email,"&comment_title=").concat(this.comment_title,"&comment_text=").concat(this.comment_text);fetch("/Comment/write_comment",{method:"POST",body:e,headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){return 200!==t.status?Promise.reject():t.json()})).then((function(e){if(Number.isInteger(e)&&e>0)t.showForm=!1,t.user_name="",t.user_email="",t.comment_title="",t.comment_text="",t.getDataComment(),alert("Комментарий добавлен.");else{var r,n=_createForOfIteratorHelper(e);try{for(n.s();!(r=n.n()).done;)i=r.value,t.errors.push(i)}catch(t){n.e(t)}finally{n.f()}}})).catch((function(t){return console.log(t,"ошибка")}))},getDataComment:function(){var t=this;fetch("/Comment/getComment",{method:"GET",headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){return 200!==t.status?Promise.reject():t.json()})).then((function(e){t.dataComment=e})).catch((function(t){return console.log(t,"ошибка")}))},sortData:function(){var t=this.dataComment;this.dataComment=[],this.dataComment=t.reverse(),this.sortBtn=!this.sortBtn}},created:function(){this.getDataComment()}});