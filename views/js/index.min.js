"use strict";var app=new Vue({el:"#app",data:function(){return{showForm:!1,user_name:null,user_email:null,comment_title:null,comment_text:null,errors:[],showForm__btn:!0,dataComment:[]}},methods:{sendComment:function(){this.validationForm(),0===this.errors.length&&this.requestFetch()},validationForm:function(){this.errors=[],(!this.user_name||this.user_name.length<3||this.user_name.length>50)&&this.errors.push('Поле "Имя" - указано не верно!'),(!this.user_email||!this.user_email.match(/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/gi)||this.user_email.length<3||this.user_email.length>50)&&this.errors.push('Указан неверный "E-mail" !'),(!this.comment_title||this.comment_title.length<3||this.comment_title.length>50)&&this.errors.push('"Заголовок" - должен быть больше 3 символов и меньше 50!'),(!this.comment_text||this.comment_text.length<3||this.comment_text.length>500)&&this.errors.push('"Комментарий" - должен быть больше 3 символов но меньше 500!')},requestFetch:function(){var t=this,e="user_name=".concat(this.user_name,"&user_email=").concat(this.user_email,"&comment_title=").concat(this.comment_title,"&comment_text=").concat(this.comment_text);fetch("/Comment/write_comment",{method:"POST",body:e,headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){return 200!==t.status?Promise.reject():t.json()})).then((function(e){Number.isInteger(e)&&e>0&&(t.showForm=!1,t.user_name=null,t.user_email=null,t.comment_title=null,t.comment_text=null,t.getDataComment(),alert("Комментарий добавлен."))})).catch((function(t){return console.log(t,"ошибка")}))},getDataComment:function(){var t=this;fetch("/Comment/getComment",{method:"GET",headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){return 200!==t.status?Promise.reject():t.json()})).then((function(e){t.dataComment=e})).catch((function(t){return console.log(t,"ошибка")}))}},created:function(){this.getDataComment()}});